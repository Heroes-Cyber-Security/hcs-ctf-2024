#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <signal.h>
#include <sys/types.h>
#include <string.h>

void win()
{
    char flag[64];

    FILE *fd = fopen("flag.txt", "r");
    if (fd == NULL)
    {
        printf("%s%s",
               "flag.txt not found, please create a flag.txt\n",
               "if this happened on remote server please contact admin");
        exit(1);
    }
    fgets(flag, 64, fd);
    printf("Gratz, here you go: %s", flag);
    exit(0);
}

void setup()
{
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stdin, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);
    signal(SIGSEGV, win);
}

int main()
{
    setup();
    char buf[32];
    printf("i'll repeaat anything u say, try it: ");
    scanf("%2s", buf);
    printf(buf);
    return 0;
}